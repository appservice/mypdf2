<html>
<head>
    <meta charset="UTF-8">

</head>
<body layout="column">

<!-- TOOLBAR -->

<!--<button class="md-raised md-primary form-control" data-ng-click="toggleRight()">Wprowadź kryterium wyszukiwania</button>
<span flex/>-->
<div class="container">
    <div class="page-header center">
        <h3>Części zamienne do odebrania z magazynu</h3>
    </div>
</div>
<br/>
<div data-ng-repeat="order in page.content" style="margin-bottom: 40pt;">
    <table id="table1">
        <!-- 	<thead> -->
        <tr style="font-size: smaller;">

            <td>Lp.</td>
            <td>Numer:</td>
            <td>Zamawiający:</td>
            <td>Dostawca:</td>
            <td>Data:</td>
            <td>Dział zaop.:</td>
            <td>Grupa zaop.:</td>
            <td>Ref:</td>
            <td></td>
        <tr>
            <td>{{$index+1+page.number*10}}</td>
            <td>{{order.number}}</td>
            <td>{{order.purchaser}}</td>
            <td>{{order.supplier}}</td>
            <td>{{order.date}}</td>
            <td>{{order.factory}}</td>
            <td>{{order.suppliesGroup}}</td>
            <td style="width: 35%" ><div data-ng-bind-html="order.orderReference|newlines"></div></td>
            <td style="direction: rtl;">
                <!--  <span flex></span><md-button class="md-raised md-primary" >zapisz</md-button>-->
            </td>
        </tr>
        <tr>
            <td colspan="8">
                <table class="CSSTableGenerator"><!--CSSTableGenerator-->
                    <tr>
                        <td data-ng-click="orderDirections('positionInOrder',$index)"> lp
                            <span class="sortorder" data-ng-show="predicate === 'positionInOrder{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>
                        <td data-ng-click="orderDirections('itemIndex',$index)"> index
                            <span class="sortorder" data-ng-show="predicate === 'itemIndex{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>
                        <td>
                            <div data-ng-click="orderDirections('name',$index)"> nazwa
                                <span class="sortorder" data-ng-show="predicate === 'name{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                            </div>
                            <div style="color: black">
                                <input type="text" placeholder="Filtruj" data-ng-model="myFilter.name" data-ng-model-options="{ debounce: 500 }"
                                       style="width:90%;opacity: 0.8;"/></div>
                        </td>
                        <td style="width: 12px;" data-ng-click="orderDirections('amount',$index)"> ilość
                            <span class="sortorder" data-ng-show="predicate === 'amount{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>
                        <td>jm</td>



                        <td data-ng-click="orderDirections('mpk',$index)"> MPK
                            <span class="sortorder" data-ng-show="predicate === 'mpk{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>

                        <td data-ng-click="orderDirections('budget',$index)"> Zlec.
                            <span class="sortorder" data-ng-show="predicate === 'budget{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>
                        <td style="width: 8px;" data-ng-click="orderDirections('dispatched',$index)"> Dostar.
                            <span class="sortorder" data-ng-show="predicate === 'dispatched{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>


                        <td data-ng-click="orderDirections('deliveryDate',$index)">
                            Data PZ
                            <span class="sortorder" data-ng-show="predicate === 'deliveryDate{{$index}}'" data-ng-class="{reverse:reverse}"></span>

                        </td>
                        <td data-ng-click="orderDirections('receivingPerson',$index)">
                            Przyjął
                            <span class="sortorder" data-ng-show="predicate === 'receivingPerson{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>
                        <td data-ng-click="orderDirections('warehouseReleasePerson',$index)"> Odbierający
                            <span class="sortorder" data-ng-show="predicate === 'warehouseReleasePerson{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>
                        <td data-ng-click="orderDirections('warehouseReleaseDate',$index)"> Data wyd.
                            <span class="sortorder" data-ng-show="predicate === 'warehouseReleaseDate{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>
                        <td data-ng-click="orderDirections('realisingPerson',$index)"> Wydał
                            <span class="sortorder" data-ng-show="predicate === 'realisingPerson{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>
                        <td data-ng-click="orderDirections('description',$index)"> Uwagi
                            <span class="sortorder" data-ng-show="predicate === 'description{{$index}}'" data-ng-class="{reverse:reverse}"></span>
                        </td>

                    </tr>
                    <!-- <tbody> -->
                    <tr data-ng-repeat="item in order.items|filter:myFilter.name">
                        <td>{{item.positionInOrder}}</td>
                        <td style="width: 125px">{{item.itemIndex}}</td>
                        <td style="width: 400px">{{item.name}}</td>
                        <td>{{item.amount}}</td>
                        <td style="width: 20px">{{item.unit}}</td>


                        <td>{{item.mpk}}</td>
                        <td>{{item.budget}}</td>
                        <td style="text-align: center; margin-left: auto; margin-right: auto;">
                            <md-checkbox ng-model="item.dispatched" aria-label="..."
                                         data-ng-click="itemUpdate(order.id,item)"></md-checkbox>
                            <!--  data-ng-click="orderReceiving(order)" -->
                        </td>
                        <td style="width: 80px">{{item.deliveryDate|date:'dd-MM-yyyy HH:mm'}}</td>
                        <td>{{item.receivingPerson}}</td>
                        <td>
                            <label>
                                <input type="text" data-ng-model="item.warehouseReleasePerson"
                                       value=" {{item.warehouseReleasePerson}}"data-ng-change="receivingPersonUpdate(item)"
                                       data-ng-model-options="{updateOn:'blur'}"/>
                            </label>
                        </td>
                        <td style="width: 80px">{{item.warehouseReleaseDate|date:'dd-MM-yyyy HH:mm'}}</td>
                        <td>{{item.realisingPerson}}</td>

                        <td>

                            <label>
                                <textarea rows="2" cols="30" style="height: 28pt" data-ng-model="item.description">{{item.description}}</textarea>
                            </label>
                        </td>
                        <!-- 	</tbody> -->

                    </tr>
                </table>

            </td>
        </tr>
        <!-- 	</tbody> -->
    </table>

    <div>
        <table style="width: 100%;">
            <tr>
                <td style="direction:rtl;padding-right:30px">
                    <md-button class="md-raised md-primary" data-ng-click="saveOrder(order,$index,$event)">Zapisz</md-button>
                </td>
            </tr>
        </table>

    </div>
    <div id="save-button-{{$index}}" layout="row">
        <br/>
    </div>

</div>

<div style="text-align: center;">
    <!-- <button style="text-align: center; margin: 0 auto;" class="btn" data-ng-click="showPreviousSite()" data-ng-show="showButton">
         <i class="glyphicon glyphicon-chevron-left"></i>Poprzednia strona
     </button>
     strona: {{startPosition/10+1}}
     <button style="text-align: center; margin: 0 auto;" class="btn" data-ng-click="showNextSite() " data-ng-show="showButton">
         Nastepna strona<i class="glyphicon glyphicon-chevron-right"></i>
     </button>-->

<paging
        page=currentPage
        page-size=page.size
        total=page.totalElements

        hide-if-empty="true"
        show-prev-next="true"
        text-title-page="Strona"
        text-title-first="Pierwsza strona"
        text-title-last="Ostatnia strona"
        text-title-next="Nastepna"
        text-title-prev="Poprzednia"

        show-first-last="true"
        paging-action="changePage( page, pageSize, total)" >
</paging>

</div>


</body>
</html>